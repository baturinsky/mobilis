for(_='umidity@Smoothness^){",e,er);.style.document..map(),]]([a,r])=>r*e+a[t,t]ine(tectonicheight.lengthe.nHTML+=`<div>${t}</div><put class="width],[let for(levation	0,"range{mMath.devicePixelRatio,\\u{1Freturnconsole.timefunction "use strict";(()=>{Snt;switch(ncase 0: t=[[-11,01-1,0;case 4: t=[[-11,-11,01,11-1,1-1,0-1,-1;case 1:[[[-11,01-1,1-1,0-1,-1][1,-11,01,11-1,0-1]]]a=>a([r,o])=>o*e+r)case 2: t=[[1,-12,01,1-1,1-2,0-1,-1;case 3: t=[[-11,01,11-1,0-1,-1}}wn,t e*(1-t)+n*t}tn,t t<e?e:t>n?n:t}En,t n?[1,2,3]a=>we[a],n[a],t)):[0]}Ten of[1,2])e[n]=t255,e[n])}var X=6;Wn((e[0]-n[0])**2+(e[1]-n[1])**2)**.5}T(e=s(X)*1e4; X=(X+E)%1e8,e-floor(e)}J([n],t~~e+~~n*t}Q(e e.getContext("2d")}O(nt=createElement("canvas"t.=t.=n,t=`${t.*}px`,t=`${t.*}px`;a=Q(t{canvas:t,ctx:a}}K(ea=Q(e).getImageData(e.,e.).data,r=new Float32Array(a/4o=0;o<a;o++)r[o]=a[o*4+3]/255; r}_n,t=5e3,a=10r=.01,o=!0let{canvas:l,ctx:i}=O(nif(om=i.createRadialGradient(1m.addColorStop(`rgba(255, 255, 255, ${r})`m.addColorStop(1,"rgba(255, 255, 255, 0)"i.fillStyle=m}else i.fillStyle=`rgba(255, 255, 255, ${r})`;m=0;m<t;m++p=[...Array(3)]()=>T()[s,d]=[p[0]*p[1]*n],M=pow(p[2],2)*a;i.savi.translats,di.rotatT()*PIi.scalM*(.5+T()M*(.5+T())i.begPath(i.arc(1,PI*2i.fill(i.restor)} l}Rnlet{canvas:t,ctx:a}=O(e.,e. a.filt=n,a.drawImag0t}Ln=.5,t=1e3if(!e)debugg;a=e,r=[...Array(t)]()=>e[floor(T()*a)] r=r.sort(r[floor(n*r)]}jn=1e3t=e,a=[...Array(n)]()=>e[floor(T()*t)]r=0;o of a)o>r&&(r=o eo=>o/r)}var _=({::n},t,a,r,o)=>K(R_n,a,sqrt(e*e+n*n)*r,o`blur(${t}px)`)Qelet{:n,:t,seed:a,noise^:r,^:o,noiseFactor:l,crustFactor:i,Factor:m,pangaea:p}=e;X=a;s=n*t;("noise"d=_(r,3e3,.15,.03M=_(o,2e3,.15,.03R=_(o,2e3,.15,.03End("noise"("ma"G=LM,.5L=M(v,g)=>(.2/(abs(G-v)+.1)-.95)*(R[g]-.2)*2h=M(v,g)=>5+d[g]*l+M[g]*i+L[g]*m+-p*(abs(g/s-.5)+abs(g%n/n-.5))End("ma"("normalize"v=4;v--;)g=n;g<h;g++)P of[-2,2,-n*2,n*2])h[g]+=((h[g+P]||0)-h[g])*.15;S=jh End("normalize"{dryE	:S,:L,p:e}}sn n??=Qeqn)}qnlet{:t,:a,avageTempature:r,biomeScramblg:o,osion:l,rivsShown:i,randomiseH@:m,genatePhoto:p,shadg:s,noise^:d,seaRatio:M,flatness:R,noiseSeed:G,e	Cold:L}=e;X=G;h=_(d,3e3,.15,.01{dryE	:S,:v}=n,g=t*a,P=LS,Mx=S(f,b)=>f<P?-pow(1-f/P,.35):pow((f-P)*(.5+v[b]*.5)/(1-P1+2*R)z=x(f,b)=>cos((abs(.5-b/g)*4+.85)*PI)/(f<0?1:1+5*f*f)("wdSmoothg"z=K(RZ(z,t,f=>[127*(f+1)]"blur(3px)"))f=>f*2-1End("wdSmoothg"N=J{:t,:a,e	:x,:v,osion:l,rivsShown:i}F=V{:t,e	:x,wd:z,steps:400}m&&(F=F(f,b)=>max(f+s(h[b]*50)/10-x[b]*.2))H=x(f,b)=>r+25-100*abs(.5-b/g)/(.7+.6*F[b])-max(f)*L("biome"ge=H(f,b)=>{E=x[b];if(E<-.4) rt;if(E<-0) nt;u=1+o*s(h[b]*100y=at[~~t5,F[b]*4.5*u)][~~t3,f*u/10+1)]; y==q&&x[b]>.5&&(y=Cey}End("biome"xe=[...F],Me=[...F],ye;if(pb=function(E,uif(E)y of[1,2])f[y]=wf[y],E[y],u)};("photo"f;ye=[...F](E,u)=>{y=x[u];if(y<0)[-(y**2)*1e3+10-(y**2)*500+15-(y**2)*300+15255];{f=[H[u]*15-E*70150-E*15H[u]*8-E*50255],TfAe=(y+v[u])*2-1;Ae>0&&b([64,255],m(1.5,Ae**2)ee=(1+s((h[u]*3+v[u])*100))*(1+T()ee=(s(h[u]*100)+.5)*ee**2*.05,b([32,32,32],eexe[u]=N[u]&&(f=[10150+50*N[u],255]U of[1,2,3])B of[1,t,-1,-t,0])b(me[ge[u+B*U]],.05if(H[u]<0&&b([5050500],-H[u]*.03TfsU=0;Y=-2;Y<=2;Y++)W=-2;W<=2;W++)U+=x[u+Y+t*W]*(sign(Y)+sign(W)B=x[u+1+t]+x[u+t]+x[u+1]-y-x[u-t]-x[u-1]+U*.05;N[u]==0&&N[u+t]!=0&&(B-=.1b([5050260],-BMe[u]=B} f}}End("photo")}ve={:v,dryE	:S,e	:x,noise:h,rivs:N,wd:z,tempature:H,h@:F,biome:gfolds:xphoto:yshades:Mp:poi:[]}; ot(veve}Fn,t=20a=e/n,r=Z(n,(i,m)=>[i<=0?100:0]o=O(n,al=o.ctx; l.begPath(l.leWidth=n/8,l.rect(n,al.strokl.filt=`blur(${t}px)`,l.filt="opacity(50%)l.drawImagr,0{h@Image:r,wetness:o.canvas}}V{:e	:n,wd:t,steps:a}("h@"r=n/o=sqrt(e*e+r*r{h@Image:l,wetness:i}=Fn,10m=o/10;s=0;s<a;s++d=[s%100/100*s%10/10*r],M=t[J(d,e)],R=[d[0]+M*.3*e/8,d[1]+abs(M)*.5*r/12];i.getContext("2d")?.drawImagi,d[0],d[1],m,m,R[0],R[1],m,m)}Q(l).filt="blur(30px)Q(l).drawImagi,r,rp=K(l End("h@"p}J{::n,e	:t,osion:a,rivsShown:r}("rivs"let{wetness:o}=Ft,100l=K(oi=t(s,d)=>1-s-l[d]*.3m=new Float32Array(e*np=S4)[0];s=0;s<a+r;s++d=s*12345%t,M=[],R=1e3;for(;t[d]>-.1&&R-- >0;s>a&&(m[d]+=1G=i[d],L=h=1e6;S of p)i[d+S]<=h&&(L=d+S,h=i[L]if(h<GS=(i[d]-h)*.01;v of[-1,1,-e])t[d+v]-=S,i[d+v]-=S}else i[d]=h+.05;M.push(dd=L}}s  t)t[s]>-.2&&t[s]<0&&(t[s]=t[s]>-.1?.01:t[s]*2+.2t[s]>0&&(t[s]*=1+T()*.1 End("rivs"m}Ken=[];t  e)n[t]=e[t]; n}Zen=parseInt(16[floor(n/256)*16,floor(n/16)%16*16,n%16*16,256]}var Ie=1,ne=2,q=3,re=4,ae=5,oe=6,k=7,ie=8,Pe=9,et=1le=11,He=12,j=13,Ce=14,tt=15,nt=16,rt=17,at=[[q,HrIeq,anrelanielj,ikoj,k,koj,k,Pe]],$e=["unknown"dest"grassland"tundra"savanna"shrubland"taiga"tropical forest"tempate forest"ra forest"swamp"snow"steppe"conifous forest"mounta shrubland"beach"coast"ocean"],V=" 42A}402}43B}\\u200D\\u2744\\uFE0F992}98A}43A}406}98C}418}40A}43E}40E}98C}40F}980}420}40B},".split("C=" 335}33B},\\u2744\\uFE0F33F}342}332}334}333}334}331},\\u26C433E}332},\\u26F0\\uFE0F3D6}\\uFE0F3DE}\\uFE0F30A}".split("console.log(C,Ce=>e)var me=K{[Ie]:"fa0[ne]:"4f4[re]:"ff8[q]:"cca[ae]:"ad4[oe]:"064[k]:"0a0[ie]:"060[Pe]:"084[et]:"880[le]:"fff[He]:"caa[j]:"0a6[Ce]:"884[tt]:"ff0"})ZeZ(n,t,ar=e/n,{canvas:o,ctx:l}=O(n,ri=l.createImageData(n,rif(!i.data||!e)debugg;m=0;m<e;m++p=s=t?t(e[m],m)??0:[e[m]];i.data.set(s,m*4)} l.putImageData(i,0o}p{e	:rivs:n},t n??=[],(a,r)=>{o=e[r]; a>0?[250-o*30200-o*30n[r]*10255]:[o*60+6o*80+10255]}}Dn,tlet{canvas:a,ctx:r}=O(n,t r.drawImage.,e.,n,ta}ot(en=[];r=400;r--;o=[r%400/400*e.p.+T()*4r%20/20*e.p.+T()*40],l=J(o,e.p.i=e.biome[l],m=r%2?V[i]:C[i],p=1+T(s={at:o,icon:m,size:p};n.push(s)}t=[...V,...C],a=[];r of to=n.filt(l=>l.icon==rl of[...o])i of[...o])l!=i&&i.size&&l.size&&Wl.at,i.at)<50&&(l.size+=i.sizi.size=0a.push(...o.filt(l=>l.size))}console.log("fpae.poi=a}var Ne=[["seed"numb""noiseSeed"numb"""numb"""numb""noise^ax:1step:.5}"^ax:1step:.5}"noiseFactor:-5,max:2step:.5}"crustFactor:-5,max:2step:.5}"Factor:-1,max:1step:.1}"pangaea:-5,max:5}"seaRatio"range{tip:"Sea pcentage"}"flatness"range""randomiseH@"checkbox""avageTempature:-3max:5step:1}"e	Cold:max:30step:1}"osionax:1e5}"rivsShownax:1e3}"biomeScramblg"range""squareGrid"checkbox""gameMapScale:max:4,step:1}"gameMapRivsax:5e4,step:1e3}"discreteHeightsax:4step:1}]];var Be={mapMode:seed:1,:64:64scale:1,noiseFactor:1crustFactor:6,Factor:3,noise^:2,^:5,pangaea:seaRatio:.55,flatness:.5,randomiseH@:avageTempature:15,osion:5e4,rivsShown:40biomeScramblg:traTypeColorg:discreteHeights:hillRatio:.12,mountaRatio:.04,gameMapRivs:15e3,gameMapScale:2,genatePhoto:1,squareGrid:0},c={};it(if(location.hashc={};e=location.hash.substr(1).split("&")n=>n.split("=")console.log(en of e)c[n[0]]=n[1]=="false"?!1:n[1]=="true"?!0:Numb(n[1]console.log(c)}(!c||!c.)&&(c=JSON.parslocalStorage.mapGenSettgs)(!c||!c.)&&(c={...Be}kf)}wdow.onload=it;wdow.resetSettgs=()=>{};ffor(let[n]of Neif(n=="tip")contue;t=getElementById(ec[e]=t.type=="checkbox"?t.checked?1:0:Numb(t.valuea=getElementById(e+"_value"a&&(a.nText=Strg(c[e]).substr(8))}Xmt(c)}wdow.applySettgs=fe;body.addEventListen("mousedowne=>{switch(e.target?.idcase"resetSettgs":c={...Be},kf}}lt(n,t,ar={};o of a??Object.keys(e)r[o]=new Float32Array(e[o]l=e[o],i=n[o];if(o=="photo"||o=="biome")m  l)r[o][m]=El[m],i[m],telse m  l)r[o][m]=l[m]*(1-t)+i[m]*t} r}blendMaps.onchange=e=>{n=Numb(blendMaps.valueif($>=2("blend"t=lt($[$-2],$[$-1],n,["dryE	""]End("blend"("blendGen"a=sUtEnd("blendGen"za)}};var ce={};ke=getElementById("form"e.nHTML="";n of Nelet[t,a,r]=n;switch(r=r||{},ce[t]=r.tip,acase"tip":e.nHTML+=`<div class="tip">${t}</div>`;break;case"checkbox":checkbox" type="checkbox" id="${t}" ${c[t]?"checked":""} />`;break;case"numb":numb" type="numb" id="${t}" value="${c[t]}" />`;break;case"range":o=r.m||l=r.max||1,i=r.step||(l-o)/100;range" type="range" id="${t}" m="${o}" max="${l}" step="${i}" value="${c[t]}"/><div id="${t}_value"></div>`;break}}}Xlocation.hash=Object.keys(c)e=>`${e}=${c[e]}`).jo("&"localStorage.mapGenSettgs=JSON.strgify(c)}var ue=[],Obe;I(n,t,a=1/4,ro=Z(c.,t,rl=Do,o.*a,o.*ai=l.getContext("2d"i.font="14px Vdanai.fillStyle="#fffi.strokeText(n,5,15i.fillText(n,4,14miMaps.appendChild(lm=ue; m==c.mapMode&&(ma.appendChild(oma=`${c.*}px`,ma=`${c.*}px`,be=ol.id="mi_"+m,ue.push(oOe.push(ll.onclick=()=>{c.mapMode=m,Xma.setHTMLUnsaf""ma.appendChild(o)},o}var D,$=[],w=[0],Gde;st(en=J(c.tooltipleft=`${m(wdow.nWidth-30de[0]+20)}`,tooltiptop=`${m(wdow.nHeight-30de[1]-40)}`,tooltipdisplay="gridtooltip.nHTML=Object.keys(D)t=>{a=D[t][n];`<div>${t}</div><div>${t=="photo"?a?r=>~~r):t=="biome"?a+" "+C[a]+V[a]+$e[a]?.toUppCas):~~(a*1e6)/1e6}</div>`}).jo("")}onmousemove=e=>{n=[e.movementX,e.movementY];de=[e.screenX,e.screenY],e.target==be&&e.buttons&&(w[0]+=n[0]*,w[1]+=n[1]*,h)t=e.target,a=t.tagName=="CANVASr=t.id;a?(Ge=[e.offsetX/t.*c./,e.offsetY/t.*c./],st(Ge)):ce[r]?tooltip.nHTML=ce[r]:tooltipdisplay="none"};var A=1;ma.onwheel=e=>{n=A;A+=(e.deltaY>0?-1:1)*1/8,A=A<0?0:A,console.log(A,ww[0]=(w[0]-400)*2**(A-n)+40w[1]=(w[1]-400)*2**(A-n)+40e.preventDefault(e.stopPropagation(h)};zelet{e	:n,dryE	:t,:a,rivs:r,wd:o,tempature:l,h@:i,biome:m}=e;if(("draw"ma.setHTMLUnsaf""miMaps.setHTMLUnsaf""ue=[],Oe=[],I(n,"e	p{e	:n,rivs:r},c)I(t,"dryE	p{e	:np=>p/3+.3rivs:void 0},c)I(a,"s(p,s)=>[p*255]I(l,"tempature(p,s)=>[p*5+10255-abs(p-5)*1155-p*5,255]I(o,"wd(p,s)=>[p*10-p*10255]I(i,"h@(p,s)=>r[s]&&n[s]>0?[255]:s%c.<20?[o[s]*10-o[s]*10255]:n[s]<0?[255]:[300-p*1e3,n[s]*200+5p*350-15255]I(m,"biome(p,s)=>n[s]<0||r[s]?[48255]:me[p]c.genatePhotoI(e.photo,"photop=>p,void p=>max(1,~~(n[p]*20)*2)p of e.pois=createElement("div"s.classList.add("poi"s.nHTML=p.icon,p.div=s,ma.appendChild(s)}}End("draw"h)}var Ue;hbetransform=`translat${w[0]}px, ${w[1]}px) scal${2**A})`;e of D.poin=e.div;n&&(nleft=`${e.at[0]**2**A+w[0]-8}px`,ntop=`${e.at[1]**2**A+w[1]-8}px`,nfontSize=`${e.size**.5*8*2**A}px`)}}mt(eUe=("genation total"D=se$.push(DzDEnd("genation total")}})(';G=/[-^@]/.exec(_);)with(_.split(G))_=join(shift());eval(_)

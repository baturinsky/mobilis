for(_='tip:"\\umidity@(e,^",let ;for(ineight0,"range{Factorm:-5,max:2step:.5,\\W of the \'secheckbox".length255Smoothnessmax:1step:.5,\\Smootheness of the er),.map(]]([n,a])=>a*e+n[t,t]widthMath.floor(e.nHTML+=`<div>${t}</div><put class="	){lettectoniclevation],[returndocument.getElementById(console.timefunction "u strict";(()=>{O^r t;switch(r){ca 0: t=[[-11,01-1,0;ca 4: t=[[-11,-11,01,11-1,1-1,0-1,-1;ca 1:[[[-11,01-1,1-1,0-1,-1][1,-11,01,11-1,0-1]]]n=>n([a,o])=>o*e+a));ca 2: t=[[1,-12,01,1-1,1-2,0-1,-1;ca 3: t=[[-11,01,11-1,0-1,-1}}Ee^r,t){ e*(1-t)+r*t}j^r,t){ r?[1,2,3]n=>Ee(e[n],r[n],t)):[0]}var H=6;x( e=s(H)*1e4; H=(H+E)%1e8,e-e)}Te([e,r],t){ e)+r*t)}W(e){ e.getContext("2d")}N^r t=document.createElement("canvas");t.=e,t.h=r;n=W(t);{canvas:t,ctx:n}}K(e n=W(e).getImageData(e.,e.h).data,a=new Float32Array(n/4)o=0;o<n;o++)a[o]=n[o*4+3]/; a}Ie^r,t=5e3,n=10a=.01,o=!0{canvas:s,ctx:m}=N^r);if(o l=m.createRadialGradient(1);l.addColorStop(`rgba(, , , ${a})`l.addColorStop(1,"rgba(, , , 0)"m.fillStyle=l}el m.fillStyle=`rgba(, , , ${a})`l=0;l<t;l++ i=[...Array(3)]()=>x()[u,c]=[i[0]*e,i[1]*r],h=pow(i[2],2)*n;m.save(m.translate(u,cm.rotate(x()*PIm.scale(h*(.5+x()h*(.5+x())m.begPath(m.arc(1,PI*2m.fill(m.restore()} s}^r{canvas:t,ctx:n}=N(e.,e.h); n.filt=r,n.drawImage^0t}Y^r=.5,t=1e3){if(!e)debugg;n=e,a=[...Array(t)]()=>e[x()*n)]); a=a.sort(a[r*a)]}Re^r=1e3 t=e,n=[...Array(r)]()=>e[x()*t)]a=0o of n)o>a&&(a=o); eo=>o/a)}var k=({:e,h:r},t,n,a,o)=>K((Ie^r,n,sqrt(e*e+r*r)*a,o`blur(${t}px)`));Le(e{:r,h:t,ed:n,noiSmoothness:a,Smoothness:o,noiFactor:s,crustFactor:m,Factor:l,pangaea:i}=e;H=n;u=r*t;("noi");c=k^a,3e3,.15,.03h=k^o,2e3,.15,.03v=k^o,2e3,.15,.03);End("noi"("ma");b=Y(h,.5w=h(E,y)=>(.2/(abs(b-E)+.1)-.95)*(v[y]-.2)*2A=h(E,y)=>5+c[y]*s+h[y]*m+w[y]*l+-i*(abs(y/u-.5)+abs(y%r/r-.5)));End("ma"("normalize");C=Re(A); End("normalize"{dryE:C,:w}}Z^r){ r??=Le(eCe^r)}Ce^r{:t,h:n,avageTempature:a,biomeScramblg:o,osion:s,rivsShown:m,randomiH@:l,genatePhoto:i,shadg:u,noiSmoothness:c,aRatio:h,flatness:v,noiSeed:b,eCold:w}=e;H=b;A=k^c,3e3,.15,.01{dryE:C,:E}=r,y=t*n,P=Y(C,hS=C(f,p)=>f<P?-pow(1-f/P,.35):pow((f-P)*(.5+E[p]*.5)/(1-P1+2*v)ne=De({:t,h:n,e:S,:E,osion:s,rivsShown:m}B=S(f,p)=>cos((abs(.5-p/y)*4+.85)*PI)/(f<0?1:1+5*f*f));("wdSmoothg"B=K((q(B,t,f=>[127*(f+1)]"blur(3px)"))f=>f*2-1End("wdSmoothg");I=Fe({:t,h:n,e:S,wd:B,steps:400});l&&(I=I(f,p)=>max(f+s(A[p]*50)/10-S[p]*.2)));F=S(f,p)=>a+25-100*abs(.5-p/y)/(.7+.6*I[p])-max(f)*w);("biome");ae=F(f,p)=>{M=1+o*s(A[p]*100g=Pe[max(m(I[p]*4.5*M,5)))][max(m(f*M/10+1,3)))]||0; g==Q&&S[p]>.5&&(g=ceg});End("biome");oe; i&&(("photo"oe=[...I](f,p)=>{M=S[p];if(M<0)[(1+M*2)*55+3(1+M*2)*155+5];{g=[max(F[p]*15-f*1e3150-f*10max(F[p]*8-f*500],ie=(M+E[p])*2-1;if(ie>0&&(g=j(g,[],m(1.5,ie**2*(.5+x())))F[p]<0&&(g=[,,,]ne[p])[6100+1e3*M,]D=0;D<3;D++)g[D]+=50+-M*140+25*atan(120*((S[p+t*(p>t*n/2?1:-1)]||0)-M))D of[1,t,-1,-t,0])g=j(g,ee[ae[p+D]],.1); M>0&&M<5e-4&&(g=j(g,[128,,],.5)g}}End("photo"){:E,dryE:C,e:S,noi:A,rivs:ne,wd:B,tempature:F,h@:I,biome:ae,photo:oe}}Fe({:e,h:r,e:t,wd:n,steps:a}){("h@");o=sqrt(e*e+r*rs=e/2,m=q(t,e,(c,h)=>[c<=0?100:0]l=N(e+s*2,r+s*2);l.ctx.begPath(l.ctx.rect(s/2,s/2,e+s,r+sl.ctx.leWidth=s/2,l.ctx.stroke(l.ctx.drawImage(m,e/2,r/2l.ctx.filt="opacity(50%)";i=o/10c=0;c<a;c++ h=[c%100/100*e,c%10/10*r],v=n[Te(h,e)],b=[h[0]+v*.3*e/8,h[1]+abs(v)*.5*r/12];l.ctx.drawImage(l.canvas,h[0]+s,h[1]+s,i,i,b[0]+s,b[1]+s,i,i)}W(m).filt="blur(10px)W(m).drawImage(l.canvas,s,s,e,r,e,r);u=K(m); End("h@"u}De({:e,h:r,e:t,h@:n,:a,osion:o,rivsShown:s}){("rivs");m=new Float32Array(e*rl=O^4)[0]i=0;i<o+s;i++ u=x()*e*r);if(t[u]<x()||n&&n[u]<x())contue;c=1e4;for(;t[u]>-.15&&c-- >0;){i>o&&(m[u]+=1);h=t[u],v=b=100w=0;w<8;w++ A=l[w];t[u+A]<=b&&(v=u+A,b=t[v])}b<h?t[u]-=(h-b)/5:t[u]=b+.02,u=v}} End("rivs"m}var me=1,G=2,Q=3,ue=4,V=5,z=6,$=7,U=8,de=9,He=1J=11,pe=12,X=13,ce=14,Ne=15,Pe=[[Q,pe,ue,meQ,V,G,GJ,V,G,UJ,X,U,Uz,X,$,$z,X,$,de]],fe=["unknown"dest"grassland"tundra"savanna"shrubland"taiga"tropical forest"decidious forest"ra forest"swamp"snow"steppe"conifous forest"mounta shrubland"beach"];Be(e r=[]t  e)r[t]=e[t]; r}Oe(e r=parInt^16);[r/256)*16,r/16)%16*16,r%16*16,256]}var ee=Be({[me]:"ff0[G]:"8f8[Q]:"cca[ue]:"cc0[V]:"ad4[z]:"064[$]:"080[U]:"4a4[de]:"084[He]:"880[J]:"fff[pe]:"cfa[X]:"0a4[ce]:"844[Ne]:"ffd"})Oe);q^r,t,n a=e/r,{canvas:o,ctx:s}=N(r,am=s.createImageData(r,a);if(!m.data||!e)debuggl=0;l<e;l++ i=u=t(e[l],l)??0;m.data.t(u,l*4)} s.putImageData(m,0o}he({e:e,rivs:r},{discreteHs:t=1traTypeColorg:n=!1,hillRatio:a=.1,mountaRatio:o=.02,green:s=!0} m=Y^1-al=Y^1-o);(i,u)=>{if(r[u]&&i>0)[i*4020];c=t?i*t)/t:i; i>0?n?i<m?[32,128,32,]:i<l?[196,196,32,]:[128,32,]:s?[c*40c*150+105]:[250-c*30200-c*30]:[c*60+6c*80+10]}}ge^r,t{canvas:n,ctx:a}=N(r,t); a.drawImage^e.,e.h,r,tn}be(e){ e.getContext("2d")}var Je="334433443223100110013223".split("")^r)=>Numb(e)*4+r%2+r/4)%2*2);var Me=[["ed"numb{\\Seed for teectonics."}"noiSeed"numb{\\Seed for oth."}""numb{\\Map   pixels"}"h"numb{\\Map h  pixels"}"noie noi"}"noi that is ud for  plates simulation"}"noigenal purpo\' e noi"}"crust plates\' noi. Increa to have more mountas on the edge on contents, reduce to have them side."}"Factorm:-1,max:3,step:.1,\\Amount of mountas and island chas and such"}"pangaeam:-5,max:5,\\Increasg this will make land gravitate the centre of the map, and vice vsa"}"aRatio\\Sea pcentage"}"flatness\\Initial flatness of the non-mounta areas"}"randomiH@""avageTempaturem:-3max:5step:1}"eColdm:3,max:3step:1}"osionmax:1e5,\\How long wat-caud osion will be simulated"}"rivsShownmax:1e3,\\Amount of rivs and lakes shown on e, h@ and biome maps"}"biomeScramblg\\Adds randomness to biomes"}"SET gameMapScale TO NOT 0 IF YOU WANT A GAME MAP"tip""squareGrid""gameMapScalem:max:4,step:1}"gameMapRivsmax:5e4,step:1e3,\\How many rivs will the be on the low-res (hex) map"}"Graphical repenation ttgs"tip""genatePhoto""discreteHsmax:4step:1}"traTypeColorg""genateTileMap"]];var xe={mapMode:ed:1,:64h:64scale:1,noiFactor:1crustFactor:6,Factor:3,noiSmoothness:2,Smoothness:5,pangaea:aRatio:.55,flatness:.5,randomiH@:!1,avageTempature:15,osion:5e4,rivsShown:40biomeScramblg:traTypeColorg:!1,discreteHs:hillRatio:.12,mountaRatio:.04,gameMapRivs:15e3,gameMapScale:2,genatePhoto:!squareGrid:!1},d={};Ge(){if(document.location.hash){d={};e=document.location.hash.substr(1).split("&")r=>r.split("="));console.log(e)r of e)d[r[0]]=r[1]=="fal"?!1:r[1]=="true"?!0:Numb(r[1]);console.log(d)}(!d||!d.)&&(d=JSON.par(localStorage.mapGenSettgs)(!d||!d.)&&(d={...xe}ve(re()}wdow.onload=Ge;wdow.retSettgs=()=>{};re(){for(let[e,r]of Me){if(r=="tip")contue;t=e);d[e]=t.type=="?t.checked:Numb(t.value);n=e+"_value");n&&(n.nText=Strg(d[e]).substr(8))}ye(Ue(d)}wdow.applySettgs=re;document.body.addEventListen("moudowne=>{switch(e.target?.id){ca"retSettgs":d={...xe},ve(re();}});$e^r,t,n a={}o of n??Object.keys(e)){a[o]=new Float32Array(e[o]);s=e[o],m=r[o];if(o=="photo"||o=="biome")for(l  s)a[o][l]=Xe(s[l],m[l],t);el for(l  s)a[o][l]=s[l]*(1-t)+m[l]*t} a}blendMaps.onchange=e=>{("blend");r=Numb(blendMaps.value);if(R>=2 t=$e(R[R-2],R[R-1],r,["dryE""]n=Z(Ae,t);we(n)}End("blend")};var _={};ve( e="form");e.nHTML=""r of Me[t,n,a]=r;switch(a=a||{},_[t]=a.tip,n){ca"tip":e.nHTML+=`<div class="tip">${t}</div>`;break;ca":	 type=" id="${t}" ${d[t]?"checked":""} />`;break;ca"numb":	numb" type="numb" id="${t}" value="${d[t]}" />`;break;ca"range":o=a.m||s=a.max||1,m=a.step||(s-o)/100;	range" type="range" id="${t}" m="${o}" max="${s}" step="${m}" value="${d[t]}"/><div id="${t}_value"></div>`;break}}}ye(){document.location.hash=Object.keys(d)e=>`${e}=${d[e]}`).jo("&"localStorage.mapGenSettgs=JSON.strgify(d)}var te=[],Se=[];T^r,t,n=1/4,a o=q^d.,t,as=ge(o,o.*n,o.h*nm=be(s);m.font="14px Vdanam.fillStyle="#fffm.strokeText(r,5,15m.fillText(r,4,14"mimaps")?.appendChild(s);l=te;l==d.mapMode&&"map")?.appendChild(os.id="mi_"+l,te.push(oSe.push(ss.onclick=()=>{d.mapMode=l,ye("map")?.tHTMLUnsafe("""map")?.appendChild(o)}}var L,R=[];document.onmoumove=e=>{r=[e.offtX,e.offtY],t=e.target,n="tooltip");n.style.left=`${m(wdow.nWidth-30e.screenX+20)}`,n.style.top="$m(wdow.nH - 20 e.screenY - 40)}";a=t.tagName=="CANVASo=t.id;if(n.style.display=a?"grid":_[o]?"block":"nonea s=e.offtX/t.*d.,m=e.offtY/t.h*d.h,l=s)+m)*d.;n.nHTML=Object.keys(L)i=>i=="photo"?"":`<div>${i}</div><div>${i=="biome"?fe[L[i][l]].toUppCa():L[i][l]}</div>`).jo("")}el _[o]&&(n.nHTML=_[o])};we(e{e:r,:t,rivs:n,wd:a,tempature:o,h@:s,biome:m,photo:l}=e;("draw""map")?.tHTMLUnsafe("""mimaps")?.tHTMLUnsafe(""te=[],Se=[],T(r,"ehe({e:r,rivs:n},d)T(t,"s(i,u)=>[i*]T(o,"tempature(i,u)=>[i*5+10-abs(i-5)*1155-i*5,]T(a,"wd(i,u)=>[i*10-i*10]T(s,"h@(i,u)=>n[u]&&r[u]>0?[]:u%d.<20?[a[u]*10-a[u]*10]:r[u]<0?[]:[300-i*1e3,r[u]*200+5i*350-15]T(m,"biome(i,u)=>r[u]<0||n[u]?[48]:ee[i]d.genatePhoto&&T(l,"photo(i,u)=>i,void i=>max(1,~~(r[i]*20)*2)End("draw")}var Ae;Ue(e){Ae=e,("genation total"L=Z(eR.push(Lwe(LEnd("genation total")}Xe^r,t){throw new Error("Function not implemented.")}})();';G=/[-^@\\]/.exec(_);)with(_.split(G))_=join(shift());eval(_)
